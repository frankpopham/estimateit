---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# estimateit

The goal of `estimateit` is to estimate marginal effects using inverse probability weights generated by [`weightit`](https://github.com/ngreifer/WeightIt). Effects include the effect for the treated, the effect for the untreated or control, their difference, their relative difference, and their odds ratio. As the previous sentence implies `estimateit` only works with binary exposures and binary outcomes at present.

## Installation

You can install the development version of `estimateit` from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("frankpopham/estimateit")
```

## Example

This is a basic example which shows you how to solve a common problem:

```{r example}
## A simple example
library(estimateit)
library(cobalt)
library(WeightIt)
library(tidyverse)
data("lalonde", package = "cobalt")
W1 <- weightit(treat ~ age + educ + married +
                 re74, data = lalonde,
               method = "ps", estimand = "ATE")
summary(W1)
bal.tab(W1)
E1 <- estimateit(W1, nodegree, lalonde)
E1

## get all estimands

WS <-map(list(ATE="ATE", ATT="ATT", ATC="ATC", AT0="ATO", ATM="ATM", ATOS="ATOS"),
    ~weightit(formula = treat ~ age + educ + married +
                 re74, data = lalonde,  method = "ps", estimand = .x))

ES <- map(WS, ~estimateit(.x, nodegree, lalonde))

all_estimands <- map(ES, ~.x$table) %>%
  map_dfr(~.x, .id="Estimand")
all_estimands



```
